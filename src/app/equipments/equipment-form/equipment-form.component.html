<div class="columns">
  <div class="column is-3 background-color">
    <app-menu></app-menu>
  </div>
  <div class="column is-9">
    <div class="container">
      <form
        role="form"
        (submit)="
          createEquipment(
            selectedCategoryId,
            number.value,
            serialNumber.value,
            description.value,
            block.value,
            room.value,
            selectedConservationState,
            hostname.value,
            addressIP.value,
            addressMAC.value,
            filename.value
          )
        "
      >
        <div class="header-equipment-create">
          <button
            class="btn-salvar"
            mat-raised-button
            color="primary"
            type="submit"
          >
            Salvar
          </button>

          <button
            *ngIf="equipment ? equipment.id : 0"
            class="btn-excluir"
            mat-raised-button
            type="button"
            (click)="equipment && deleteEquipment(equipment.id)"
          >
            Deletar
          </button>
        </div>
      </form>

      <div class="content-equipment-create">
        <div class="description"></div>

        <div class="two-fields-container">
          <div class="two-fields-box">
            <mat-label>Número:</mat-label>
            <input
              #number
              id="numberInput"
              class="medium-input"
              value="{{ equipment ? equipment.number : '' }}"
              aria-label="Número"
              [formControl]="myControl"
              matInput
              [matAutocomplete]="auto"
            />
            <mat-autocomplete #auto="matAutocomplete">
              <mat-option
                *ngFor="let option of filteredOptions | async"
                value="{{ equipment ? equipment.number : '' }}"
                (click)="autoCompleteInputFields(option.number)"
              >
                {{ option.description }}
              </mat-option>
            </mat-autocomplete>
          </div>

          <div class="two-fields-box">
            <mat-label class="two-labels">Número de série:</mat-label>
            <input
              #serialNumber
              matInput
              class="medium-input"
              value="{{ equipment ? equipment.serialNumber : '' }}"
            />
          </div>
        </div>

        <div class="description">
          <mat-label>Descrição:</mat-label>
          <textarea
            class="inputDescription"
            type="text"
            id="descriptionInput"
            #description
            matInput
            >{{ equipment ? equipment.description : "" }}</textarea
          >
        </div>

        <mat-form-field appearance="fill">
          <mat-label>Categoria:</mat-label>
          <mat-select id="category" [(ngModel)]="selectedCategoryId">
            <mat-option
              *ngFor="let category of categories"
              [value]="category.id"
            >
              {{ category.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Estado De Conservação:</mat-label>
          <mat-select
            id="conservationState"
            [(ngModel)]="selectedConservationState"
          >
            <mat-option
              *ngFor="let conservationState of conservationStates"
              [value]="conservationState"
            >
              {{ conservationState }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <div class="two-fields-container">
          <div class="two-fields-box">
            <mat-label class="two-labels">Bloco:</mat-label>
            <input
              #block
              matInput
              class="medium-input"
              value="{{ equipment ? equipment.block : '' }}"
            />
          </div>
          <div class="two-fields-box">
            <mat-label class="two-labels">Sala:</mat-label>
            <input
              #room
              matInput
              class="medium-input"
              value="{{ equipment ? equipment.room : '' }}"
            />
          </div>
        </div>
      </div>

      <div class="two-fields-container">
        <div class="two-fields-box">
          <mat-label class="two-labels">Hostname (opcional):</mat-label>
          <input
            #hostname
            matInput
            class="medium-input"
            value="{{ equipment && equipment.network ? equipment.network.hostname : '' }}"
          />
        </div>
        <div class="two-fields-box">
          <mat-label class="two-labels">Endereço IP (opcional):</mat-label>
          <input
            #addressIP
            matInput
            class="medium-input"
            value="{{ equipment && equipment.network ? equipment.network.addressIP : '' }}"
          />
        </div>
      </div>
      <div class="one-field-container">
        <div class="one-field-box">
          <mat-label>Endereço MAC (opcional):</mat-label>
          <input
            #addressMAC
            matInput
            value="{{ equipment && equipment.network ? equipment.network.addressMAC : '' }}"
          />
        </div>
      </div>
      <div class="input-file-container">
        <input #filename class="input-file" type="file" (change)="inputFileChange($event)" />
      </div>
    </div>
  </div>
</div>
